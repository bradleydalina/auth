<!DOCTYPE html>
<html>
<head>
  <title>Callback</title>
</head>
<body>
    <button onclick="redirectToLogin()">Login with [Provider]</button>
    <button onclick="logout()">Logout</button>
<script>
function redirectToLogin() {
  const clientId = '969519257728-0osbcf5pgbclqi2khvih1bfed2dnpc9l.apps.googleusercontent.com';
  const redirectUri = 'https://she3t.netlify.app/';
  const scope = 'profile'; // Adjust scope as needed
  const state = generateRandomString(); // Function to generate a random string

  const loginUrl = `https://google.com/oauth2/authorize?` +
                  `response_type=token&` +
                  `client_id=${clientId}&` +
                  `redirect_uri=${redirectUri}&` +
                  `scope=${scope}&` +
                  `state=${state}`;

  window.location.href = loginUrl;
}
function logout() {
  // Optionally send a request to AS logout endpoint (check AS documentation)
  removeAccessTokenFromStorage(); // Function to remove stored token
  window.location.href = '/'; // Redirect to homepage or login page
}
    const urlParams = new URLSearchParams(window.location.search);
    const accessToken = urlParams.get('access_token');
    const state = urlParams.get('state');  // Verify state for CSRF protection
    
    if (accessToken) {
      // Store access token securely (e.g., session storage)
      console.log("Logged In! Access Token:", accessToken);
    } else {
      console.log("Login failed.");
    }
      async function getUserProfile() {
      const accessToken = getAccessTokenFromStorage(); // Function to retrieve stored token
      const response = await fetch('https://she3t.netlify.app', {
    headers: {
      Authorization: `Bearer ${accessToken}`
    }
  });

  const data = await response.json();
  console.log("User Profile:", data);
}
  </script>
</body>
</html>
